Input: R0
Input: R1
Input: R2
Input: R3 
Input: R4

Input: prev [4] 

vsum0 =Add16x4(R0, R1)
vsum1 =Add16x4(R1, R2)
vsum2 =Add16x4(R2, R3)
vsum3 =Add16x4(R3, R4)

H0 =HAdd16x4(R0, vsum0)
H1 =HAdd16x4(R1, vsum1)
H2 =HAdd16x4(R2, vsum2)
H3 =HAdd16x4(R3, vsum3)

O0=RShf16x4(H0)
O1=RShf16x4(H1)
O2=RShf16x4(H2)
O3=RShf16x4(H3)

Output: O0
Output: O1
Output: O2
Output: O3

